<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>排序测试</title>
    <style>
        html,body{
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
            font-size: 16px;
            color: #212121;
        }
        .test{
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #eee;
        }
    </style>
</head>
<body>
    <div class="test">
        chrome is the best test tools;
    </div>
    <script>
        let sortArray = [141, 222, 780, 538, 746, 725, 637, 666, 341, 125, 554, 907, 93,
            667, 808, 452, 320, 348, 493, 843, 898, 326, 290, 62, 416, 470, 841, 810, 732,
            214, 763, 649, 139, 211, 41, 777, 726, 459, 570, 607, 154, 146, 228, 675, 86,
            817, 282, 561, 859, 487, 4, 513, 86, 488, 306, 628, 206, 721, 937, 419, 908,
            293, 432, 524, 36, 551, 747, 263, 744, 642, 975, 662, 749, 329, 9, 339, 630,
            504, 499, 495, 285, 539, 707, 707, 249, 612, 581, 774, 925, 667, 644, 122,
            94, 638, 317, 571, 136, 79, 197, 146,94,84,67,80,17,5,79,31,277,98,88,23,34,
            112,45,65,234,566,23,46,36456,5456,23,454,56,2,456,54,456,34,56,76,93,83];
        /**
         * 冒泡排序方法 先把大的数据冒泡上去[升序]
         * @param {*} needSortArray 是一个待排序的init 数组【未校验】
         */
        function Bubble_Sort(needSortArray=[]) {
            const isArray = Object.prototype.toString.call(needSortArray) === '[object Array]',
                isIntArray = needSortArray.every( item => typeof item === 'number');
            if(!isArray || !isIntArray) { // 校验整数数组
                return needSortArray;
            }
            const arrayLen = needSortArray.length;
            let okFlag = false,
                startTime = new Date().getTime();
            for(let i=0; i<arrayLen-1 && !okFlag; i++) {
                okFlag = true; // 假设已经OK
                for(let j=0; j<arrayLen-i-1; j++) {
                    let beforeNum = needSortArray[j],
                        afterNum = needSortArray[j+1];
                    if(beforeNum > afterNum) {
                        needSortArray[j] = afterNum;
                        needSortArray[j+1] = beforeNum;
                        okFlag = false; // 如果有变化说明排序还没完成
                    }
                }
            }
            let endTime = new Date().getTime();
            console.log('冒泡排序耗时：', endTime-startTime, "ms");
            console.log('冒泡排序结果：', needSortArray);
            return needSortArray;
        }
        Bubble_Sort([...sortArray]);
    </script>
</body>
</html>